@if (!appState.connected && !isConnecting) {
  <div class="flex gap-3">
    @if (errorMessage) {
      <div class="bg-red-900/50 border border-red-700 text-red-200 px-4 py-3 rounded-lg">
        {{ errorMessage }}
      </div>
    }

    @if (successMessage) {
      <div class="bg-green-900/50 border border-green-700 text-green-200 px-4 py-3 rounded-lg">
        {{ successMessage }}
      </div>
    }

    @if (!isSignupMode) {
      <input
        [(ngModel)]="username"
        [placeholder]="'USERNAME' | translate"
        (keyup.enter)="password.trim() && connect()"
        class="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-green-600 focus:outline-none"
      />

      <input
        [(ngModel)]="password"
        type="password"
        [placeholder]="'PASSWORD' | translate"
        (keyup.enter)="username.trim() && password.trim() && connect()"
        class="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-green-600 focus:outline-none"
      />

      <button
        (click)="connect()"
        [disabled]="!username.trim() || !password.trim()"
        class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-semibold transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed"
      >
        {{ 'CONNECT' | translate }}
      </button>

      <button
        (click)="toggleSignupMode()"
        class="text-green-400 hover:text-green-300 text-sm transition-colors"
      >
        {{ 'CREATE_ACCOUNT' | translate }}
      </button>
    }

    @if (isSignupMode) {
      <input
        [(ngModel)]="username"
        [placeholder]="'USERNAME' | translate"
        class="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-green-600 focus:outline-none"
      />

      <input
        [(ngModel)]="password"
        type="password"
        [placeholder]="'PASSWORD' | translate"
        class="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-green-600 focus:outline-none"
      />

      <button
        (click)="signup()"
        [disabled]="!canSignup()"
        class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed"
      >
        {{ 'SIGNUP' | translate }}
      </button>

      <button
        (click)="toggleSignupMode()"
        class="text-blue-400 hover:text-blue-300 text-sm transition-colors"
      >
        {{ 'BACK_TO_LOGIN' | translate }}
      </button>
    }
  </div>
}

@if (isConnecting) {
  <div class="flex items-center gap-2">
    <div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
    <span class="text-gray-300">{{ 'CONNECTING' | translate }}</span>
  </div>
}
