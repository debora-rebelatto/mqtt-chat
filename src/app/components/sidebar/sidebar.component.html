<div class="w-80 h-full bg-gray-900 border-r border-gray-700 flex flex-col">
  <div class="p-4 border-b border-gray-700">
    <div class="flex gap-2">
      <toggle-button [isActive]="activeView === 'chat'" (onClick)="onViewChange('chat')">
        {{ 'CONVERSATIONS' | translate }}
      </toggle-button>

      <toggle-button
        [isActive]="activeView === 'available-groups'"
        (onClick)="onViewChange('available-groups')"
      >
        {{ 'SEARCH' | translate }}
      </toggle-button>
    </div>
  </div>

  <user-list />
  <group-list [groups]="groupChats" />

  <!--
  @if (activeView === 'chat') {
    <div class="flex-1 overflow-y-auto p-4">
      <div class="mb-6">
        <h3 class="font-bold text-gray-300 mb-3 flex items-center gap-2">
          <lucide-icon [img]="MessageCircle" class="w-4 h-4"></lucide-icon>
          {{ 'DIRECT_CONVERSATIONS' | translate }}
        </h3>
        <div class="space-y-2">
          @for (chat of userChats; track chat.id) {
            <div
              (click)="onChatSelect('user', chat.id, chat.name)"
              [class]="
                isSelected('user', chat.id)
                  ? 'p-3 rounded-lg cursor-pointer transition-colors bg-blue-600'
                  : 'p-3 rounded-lg cursor-pointer transition-colors bg-gray-800 hover:bg-gray-750'
              "
            >
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="relative">
                    <div
                      class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold"
                    >
                      {{ chat.name.charAt(0) }}
                    </div>
                    <div
                      [class]="
                        chat.online
                          ? 'absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-gray-800'
                          : 'absolute -bottom-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-gray-800'
                      "
                    ></div>
                  </div>
                  <div>
                    <div class="font-medium text-white">{{ chat.name }}</div>
                    <div class="text-xs text-gray-400">
                      {{ chat.online ? 'Online' : chat.lastSeen }}
                    </div>
                  </div>
                </div>
                @if (chat.unread! > 0) {
                  <span
                    class="bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"
                  >
                    {{ chat.unread }}
                  </span>
                }
              </div>
            </div>
          }
          @if (userChats.length === 0) {
            <div class="text-center text-gray-500 text-sm py-4">
              {{ 'NO_USERS_ONLINE' | translate }}
            </div>
          }
        </div>
      </div>
    </div>
  }

  @if (activeView === 'available-groups') {
    <div class="flex-1 overflow-y-auto p-4">
      <h3 class="font-bold text-gray-300 mb-3 flex items-center gap-2">
        <lucide-icon [img]="Search" class="w-4 h-4"></lucide-icon>
        {{ 'AVAILABLE_GROUPS' | translate }}
      </h3>
      <div class="space-y-3">
        @for (group of availableGroups; track group.id) {
          <div class="p-4 rounded-lg bg-gray-800 border border-gray-700">
            <div class="font-medium text-white mb-1">{{ group.name }}</div>
            <div class="text-xs text-gray-400 mb-2">{{ group.description }}</div>
            <div class="flex justify-between items-center">
              <div class="text-xs text-gray-500">
                <div>{{ 'LEADER' | translate }}: {{ group.leader }}</div>
                <div>{{ group.members | memberCount }}</div>
              </div>
              <button
                (click)="onJoinGroup(group.id)"
                class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm font-semibold transition-colors"
              >
                {{ 'JOIN' | translate }}
              </button>
            </div>
          </div>
        }
        @if (availableGroups.length === 0) {
          <div class="text-center text-gray-500 text-sm py-4">
            {{ 'NO_GROUPS_AVAILABLE' | translate }}
          </div>
        }
      </div>
    </div>
  } -->

  <group-modal
    [showModal]="showCreateGroupModal"
    [newGroupName]="newGroupName"
    (modalClose)="onModalClose()"
    (groupCreate)="onModalGroupCreate()"
    (groupNameChange)="onModalGroupNameChange($event)"
  />
</div>
